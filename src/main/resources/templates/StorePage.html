<!DOCTYPE html>
<html>
<head>
    <title>Coupon Page</title>
</head>
<body>
<h1>Welcome to the Coupon Site</h1>
<div id="couponList"></div>
<button onclick="fetchMyCoupons()">My Coupons</button>

<script>
    async function fetchAvailableCoupons() {
        try {
            const response = await fetch('/your-coupon-endpoint/available', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YourAuthTokenHere'
                }
            });

            if (!response.ok) {
                throw new Error('Failed to fetch coupons');
            }

            const coupons = await response.json();
            displayAvailableCoupons(coupons);
        } catch (error) {
            console.error('Error fetching coupons:', error.message);
        }
    }

    function displayAvailableCoupons(coupons) {
        const couponListContainer = document.getElementById('couponList');
        couponListContainer.innerHTML = '';

        coupons.forEach(coupon => {
            const couponElement = document.createElement('div');
            couponElement.innerHTML = `
          <p>Coupon ID: ${coupon.id}</p>
          <p>Name: ${coupon.name}</p>
          <p>Quantity: ${coupon.quantity}</p>
          <p>Expiration Date: ${coupon.expirationDate}</p>
          <button onclick="purchaseCoupon('${coupon.id}')">Purchase</button>
        `;
            couponListContainer.appendChild(couponElement);
        });
    }

    async function purchaseCoupon(couponId) {
        try {
            const response = await fetch(`/your-coupon-endpoint/purchase/${couponId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer YourAuthTokenHere'
                }
            });

            if (!response.ok) {
                throw new Error('Failed to purchase coupon');
            }

            fetchAvailableCoupons();
        } catch (error) {
            console.error('Error purchasing coupon:', error.message);
        }
    }

    function fetchMyCoupons() {
        // Implement logic to fetch and display consumer's purchased coupons
    }

    fetchAvailableCoupons();
</script>
</body>
</html>